<body class="container">
    <div class="top-bar">
        <button class="configuration" type="button" (click)="goToConfiguration()">Configuration</button>
        <h2 class="note-container">Les images doivent être en format BMP 24-bit de taille 640x480 pixels</h2>
        <div>
            <button (click)="changeTool(0)">Pencil</button>
            <button (click)="changeTool(1)">Rectangle</button>
            <button (click)="changeTool(2)">Eraser</button>
            <button (click)="onRedo()">Redo</button>
            <button (click)="onUndo()">Undo</button>
            <input #widthPicker (change)="onSetWidth(widthPicker.value)" type="range" id="width" name="width" min="2" max="40" step="2" value="8" />
            <label for="width  ">width</label>
            <label for="colorpicker">Color Picker:</label>
            <input #colorPicker (change)="onChangeColor(colorPicker.value)" type="color" id="colorpicker" value="#ff0000" />
        </div>
    </div>

    <div class="images-area">
        <div class="image-container">
            <h1>Image Originale</h1>
            <canvas
                #leftCanvas
                width="640px"
                height="480px"
                (mousedown)="onMouseDown($event, true)"
                (mousemove)="onMouseMove($event, true)"
                (mouseup)="onMouseUp($event, true)"
            ></canvas>
            <div class="buttons">
                <input #leftImageInput id="leftImageInput" type="file" accept="image/bmp" hidden (input)="onUpdateInput(leftImageInput, true, false)" />
                <label class="lien" for="leftImageInput">Choose File</label>
                <button type="button" (click)="resetBackground(true)">Réinitialiser arrière-plan</button>
                <button type="button" (click)="onResetForeground(true)">Réinitialiser avant-plan</button>
                <button type="button" (click)="onDuplicate(true)">Dupliquer avant-plan</button>
            </div>
        </div>
        <div class="middle-buttons">
            <input
                #middleImageInput
                id="middleImageInput"
                type="file"
                accept="image/bmp"
                hidden
                (input)="onUpdateInput(middleImageInput, true, true)"
            />
            <label class="lien" for="middleImageInput">Choose File for both</label>
            <button (click)="onSwap()">Intervertir avant-plan</button>
        </div>

        <div class="image-container">
            <h1>Image Modifiée</h1>
            <canvas
                #rightCanvas
                width="640px"
                height="480px"
                (mousedown)="onMouseDown($event, false)"
                (mousemove)="onMouseMove($event, false)"
                (mouseup)="onMouseUp($event, false)"
            ></canvas>
            <div class="buttons">
                <input
                    #rightImageInput
                    id="rightImageInput"
                    type="file"
                    accept="image/bmp"
                    hidden
                    (input)="onUpdateInput(rightImageInput, false, true)"
                />
                <label class="lien" for="rightImageInput">Choose File</label>
                <button type="button" (click)="resetBackground(false)">Réinitialiser arrière-plan</button>
                <button type="button" (click)="onResetForeground(false)">Réinitialiser avant-plan</button>
                <button type="button" (click)="onDuplicate(false)">Dupliquer avant-plan</button>
            </div>
        </div>
    </div>

    <div class="bottom-buttons">
        <!--<button type="button" (click)="modifyRadius(3)">Configurer Rayon</button>-->
        <p>
            <input id="radius-input-0" type="radio" name="radius" (click)="modifyRadius(0)" />
            <label for="radius-input-0">0</label>
            <input id="radius-input-3" type="radio" name="radius" (click)="modifyRadius(3)" checked />
            <label for="radius-input-3">3</label>
            <input id="radius-input-9" type="radio" name="radius" (click)="modifyRadius(9)" />
            <label for="radius-input-9">9</label>
            <input id="radius-input-15" type="radio" name="radius" (click)="modifyRadius(15)" />
            <label for="radius-input-15">15 </label>
        </p>
        <p class="radius">Current Radius: {{ radius }}</p>
    </div>

    <button class="validation" (click)="onValidationLaunched()">Valider et créer</button>

    <div #popUpWindow class="modal">
        <div class="modal-content">
            <canvas class="modal-canva" #modalCanvas width="640px" height="480px"></canvas>
            <div *ngIf="currentGameData !== undefined">
                <p>Nombre de différences: {{ currentGameData.nbDifferences }}</p>
                <p *ngIf="currentGameData.isDifficult">Difficulté: Difficile</p>
                <p *ngIf="!currentGameData.isDifficult">Difficulté: Facile</p>
                <p class="modal-note" *ngIf="!(currentGameData.nbDifferences >= 3 && currentGameData.nbDifferences <= 9)">
                    Le jeu doit avoir entre 3 et 9 différences pour être validé
                </p>
                <button
                    *ngIf="currentGameData.nbDifferences >= 3 && currentGameData.nbDifferences <= 9"
                    type="button"
                    (click)="onSave(gameName)"
                    class="modal-button"
                >
                    Sauvegarder
                </button>
                <label for="gameName"><b>Entrez votre nom de partie:</b></label>
                <input id="gameName" #gameName type="text" placeholder="Entrez Nom" />
                <div class="modal-buttons">
                    <button class="modal-button" type="button" (click)="onClosingPopUp()">Fermer</button>
                </div>
            </div>
        </div>
    </div>
</body>
